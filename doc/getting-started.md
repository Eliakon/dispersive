#Getting started

Here's a simple TodoList example with React.


## 1. First we need to prepare the store

```js
const store = new Dispersive.Store();

store.register('todos', {
  schema: {
    text: '',
    checked: false
  }
});
```

At this point we can, for instance:

* create a Todo,

```js
store.todos.create({text: 'wash dishes'});
```

* filter non-checked Todos,

```js
const nonCheckedTodos = store.todos.filter({checked: false}).all();
```

* or check the first Todo,

```js
store.todos.first().update({checked: true});
```


## 2. Then, we'll add some actions, to control the store

```js
const createTodo = Dispersive.createAction(text => {text});
const checkTodo = Dispersive.createAction(todoId => {todoId});
```

```js
createTodo.subscribe(
  {text} => store.todos.create({text})
);
```

```js
checkTodo.subscribe(
  {todoId} => store.todos.get({id: todoId}).update({checked: true}
);
```

As the store subscribed to this 2 actions, when someone call :

```js
createTodo('wash dishes');
```

It will create a new Todo with the text "wash dishes".
And if someone call :

```js
checkTodo('c45sd498745c6');
```

It will update as checked, the Todo with the id "c45sd498745c6" (ids are autogenerated on creation).

## 3. We can now create a TodoLine component

```js
const events = ['onCheck'];

const props = {
  todoId: React.PropTypes.string.isRequired,
};

const state = {
  todo: new Dispersive.UniqueStateField(
    props => store.todos.filter({id: todoId})
  ),
};

class TodoLine extends Dispersive.mixin(React.Component, {events, props, state}) {

  onCheck() {
    checkTodo(this.props.todoId);
  }

  render() {
    return (
      <li className={this.state.todo.checked ? 'checked' : ''}>
      {this.state.todo.text}
      </li>
      {this.state.todo.checked ? null : (
        <button onClick={this.onCheck}>Check</button>
      )}
    );
  }

}
```

## 4. We finish by creating the TodoList component

```js
const events = ['onCreateTodo'];

const state = {
  todos: new Dispersive.ListStateField(store.todos),
};

class TodoList extends Dispersive.mixin(React.Component, {events, state}) {

render() {
    return (
      <ul>
        {this.state.todos.map(todo => <TodoLine todoId={todo.id}>)}
      </ul>
      <input type="text" ref="text" onKeyPress={this.onCreateTodo} />
    );
  }

}
```
